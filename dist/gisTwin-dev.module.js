function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _createSuper(n){var r=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,r?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==typeof e?e:String(e)}var BaseCamera=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.id=e.id,this._position=e.position,this._heading=e.heading,this._pitch=e.pitch,this._roll=e.roll,this._viewerArray=e.viewerArray}return _createClass(t,[{key:"goto",value:function(){}},{key:"lookAt",value:function(){}},{key:"focusTo",value:function(){}},{key:"setHeading",value:function(e){this._heading=e}},{key:"setPitch",value:function(e){this._pitch=e}},{key:"setRoll",value:function(e){this._roll=e}},{key:"setPosition",value:function(e){this._position=e}},{key:"getHeading",value:function(){return this._heading}},{key:"getPitch",value:function(){return this._pitch}},{key:"getRoll",value:function(){return this._roll}},{key:"getPosition",value:function(){return this._position}}]),t}(),BaseEnvironment=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this._atmo=e.atmo,this._skyBox=e.skyBox,this._flg=e.flg,this._particleSystem=e.particleSystem,this._weather=e.weather,this._light=e.light,this._saturation=e.saturation,this._contrast=e.contrast,this._bloom=e.bloom,this._HDR=e.HDR}return _createClass(t,[{key:"setLight",value:function(e){this._light=e}},{key:"setSaturation",value:function(e){this._saturation=e}},{key:"setContrast",value:function(e){this._contrast=e}},{key:"getLight",value:function(){return this.light}},{key:"getSaturation",value:function(){return this._saturation}},{key:"getContrast",value:function(){return this._contrast}},{key:"setBloom",value:function(e){this._bloom=e}},{key:"setHDR",value:function(){this._HDR=HDR}},{key:"getBloom",value:function(){return this._bloom}},{key:"getHDR",value:function(){return this._HDR}},{key:"setWeather",value:function(e){this._weather=e}},{key:"getWeather",value:function(){return this._weather}}]),t}(),BaseLayer=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.id=e.id,this._type=e.type,this._name=e.name,this._source=e.source,this._level=e.level,this._display=e.display,this._position=e.position,this._featuresArray=[]}return _createClass(t,[{key:"getFeatures",value:function(){return this._featuresArray}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(t){var e=this._featuresArray.findIndex(function(e){return e.id===t});this._featuresArray.splice(e,1)}},{key:"setLevel",value:function(e){this._level=e}},{key:"getLevel",value:function(){return this._level}},{key:"setLayerDisplay",value:function(e){this._display=e}},{key:"getLayerDisplay",value:function(){return this._display}},{key:"setLayerPos",value:function(e){this._position=e}},{key:"getLayerPos",value:function(){return this._position}}]),t}(),Style=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"setFeatureStyle",value:function(){}},{key:"setFeatureLabel",value:function(){}}]),e}(),BaseFeature=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.id=e.id,this._geometry=e.geometry,this._property=e.property,this._position=e.position,this._display=e.display,this._featureStyle=new Style(e.featureStyle),this._label=e.label}return _createClass(t,[{key:"setPosition",value:function(e){this._position=e}},{key:"getPosition",value:function(){return this._position}},{key:"setDisplay",value:function(e){this._display=e}},{key:"getDisplay",value:function(){return this._display}},{key:"setStyle",value:function(e){this._featureStyle=new Style(e)}},{key:"getStyle",value:function(){return this._featureStyle}},{key:"setLabel",value:function(e){this._label=e}},{key:"getLabel",value:function(){return this._label}}]),t}(),ControlMode={default:"default",pick:"pick",hover:"hover",identify:"identify",editDrawPoint:"editDrawPoint",editDrawLine:"editDrawLine",editDrayPolygon:"editDrayPolygon"},BaseUIControl=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this._controlMode=e.mode||ControlMode.default}return _createClass(t,[{key:"setMode",value:function(e){this._controlMode=e}},{key:"getMode",value:function(){return this._controlMode}},{key:"setModeParams",value:function(e){this._params=e}},{key:"getModeParams",value:function(){return this._params}}]),t}(),EventDispatcher=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){var n;return void 0!==this._listeners&&void 0!==(n=this._listeners)[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var n;void 0!==this._listeners&&void 0!==(e=this._listeners[e])&&-1!==(n=e.indexOf(t))&&e.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),BaseScene=function(){_inherits(r,EventDispatcher);var n=_createSuper(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=n.call(this))._type=t.type,e.layerList=[],e.cameraList=[],e.layer=null,e.camera=null,e.feature=null,e.environment=null,e.UIControl=null,e}return _createClass(r,[{key:"sendMsg",value:function(e,t,n,r){if("RegisterEvent"===e)this.addEventListener(t,n);else{try{("scene"===e?this:this[e])[t](n),console.log("".concat(e," - ").concat(t," - ").concat(n)),this.sendMsgToRender(t,n)}catch(e){console.error("SendMsg Error",e)}r&&this.addEventListener(t,r)}}},{key:"sendMsgToRender",value:function(e,t){}},{key:"setCoord",value:function(){}},{key:"setResolution",value:function(){}},{key:"getLayer",value:function(t){return this.layerList.find(function(e){return e.id===t})}},{key:"addLayer",value:function(){}},{key:"setLayerSort",value:function(){this.layerList.sort(function(e,t){return e.level-t.level}),this.layer=this.layerList[0]}},{key:"removeLayer",value:function(t){var e=this.layerList.findIndex(function(e){return e.id==t});this.layerList.splice(e,1),this.layer=this.layerList[0]}},{key:"addCamera",value:function(){}},{key:"getCamera",value:function(t){return this.cameraList.find(function(e){return e.id===t})}},{key:"setUsedCamera",value:function(t){this.camera=this.cameraList.find(function(e){return e.id===t})}},{key:"removeCamera",value:function(t){var e=this.cameraList.findIndex(function(e){return e.id===t});this.cameraList.splice(e,1),this.camera.id==t&&(this.camera=this.cameraList[0])}},{key:"getEnvironment",value:function(){}},{key:"setFeature",value:function(){}},{key:"setEnvironment",value:function(){}},{key:"setUIControl",value:function(){}}]),r}(),UE=function(){_inherits(n,BaseScene);var t=_createSuper(n);function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,n),(e=t.call(this,e)).ue4=window.ue.interface.broadcast,e.ue.interface.eventHandler=e.dispatchEvent,e}return _createClass(n,[{key:"sendMsgToRender",value:function(e,t){this.ue4(e,t)}},{key:"addLayer",value:function(e){e=new Layer(e);this.layerList.push(e),this.setLayerSort()}},{key:"addCamera",value:function(e){e=new Camera(e);this.cameraList.push(e)}},{key:"setFeature",value:function(e){this.feature=new Feature(e)}},{key:"setEnvironment",value:function(e){this.environment=new Environment(e)}},{key:"setUIControl",value:function(e){this.UIControl=new UIControl(e)}}]),n}(),Camera=function(){_inherits(n,BaseCamera);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),Environment=function(){_inherits(n,BaseEnvironment);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),Layer=function(){_inherits(n,BaseLayer);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"addFeatures",value:function(e){e=new Feature(e);this._featuresArray.push(e)}}]),n}(),Feature=function(){_inherits(n,BaseFeature);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),UIControl=function(){_inherits(n,BaseUIControl);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),Cloud=function(){_inherits(r,BaseScene);var n=_createSuper(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=n.call(this,t))._cloudUrl=t.cloudUrl,e._webRtcApp=window.$WebRtcApp||{},e._WebRtcApp.load(e._cloudUrl),e._webRtcApp.receivedMessagehandlerSet=e.dispatchEvent,e}return _createClass(r,[{key:"sendMsgToRender",value:function(e,t){this._webRtcApp.sendMessageHandler(e,t)}},{key:"addLayer",value:function(e){e=new Layer$1(e);this.layerList.push(e),this.setLayerSort()}},{key:"addCamera",value:function(e){e=new Camera$1(e);this.cameraList.push(e)}},{key:"setFeature",value:function(e){this.feature=new Feature$1(e)}},{key:"setEnvironment",value:function(e){this.environment=new Environment$1(e)}},{key:"setUIControl",value:function(e){this.UIControl=new UIControl$1(e)}}]),r}(),Camera$1=function(){_inherits(n,BaseCamera);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),Environment$1=function(){_inherits(n,BaseEnvironment);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),Layer$1=function(){_inherits(n,BaseLayer);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"addFeatures",value:function(e){e=new Feature$1(e);this._featuresArray.push(e)}}]),n}(),Feature$1=function(){_inherits(n,BaseFeature);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),UIControl$1=function(){_inherits(n,BaseUIControl);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(),MODE_TYPE={CLOUD:"CLOUD",UE:"UE",CESIUM:"CESIUM"},GisTwin=_createClass(function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=(_classCallCheck(this,e),(t.type||"cloud").toUpperCase());return console.log("渲染源为： %c".concat(n),"color: red"),n===MODE_TYPE.UE?new UE(t):n===MODE_TYPE.CLOUD?new Cloud(t):void 0});export default GisTwin;
